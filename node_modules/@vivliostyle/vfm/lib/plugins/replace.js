"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.replace = void 0;
var hast_util_find_and_replace_1 = __importDefault(require("hast-util-find-and-replace"));
var hastscript_1 = __importDefault(require("hastscript"));
function replace(_a) {
    var _b = _a === void 0 ? {} : _a, rules = _b.rules;
    if (!rules || rules.length == 0)
        return;
    var search = rules.map(function (rule) {
        return [
            rule.test,
            function () {
                var result = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    result[_i] = arguments[_i];
                }
                return rule.match(result, hastscript_1.default);
            },
        ];
    });
    return function (tree) { return (0, hast_util_find_and_replace_1.default)(tree, search); };
}
exports.replace = replace;
