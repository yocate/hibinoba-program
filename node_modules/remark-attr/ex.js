const unified = require('unified');
const remarkParse = require('remark-parse');
const stringify = require('rehype-stringify');
const remark2rehype = require('remark-rehype');
const remarkAttr = require('.');

const testFile = `Since XP is good we should always use XP[^xp]{ data-id=xp }


Here a link ! <http://ache.one>{here} my personal web site.

[^xp]: Apply XP principe to XP.
{#please}

`;

unified()
  .use(remarkParse, {footnotes: true})
  .use(remarkAttr, {allowDangerousDOMEventHandlers: false, scope: 'permissive'})
  .use(remark2rehype)
  .use(stringify)
  .process(testFile, (_, file) => {
    console.log(String(file));
  });
